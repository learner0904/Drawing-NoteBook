{"ast":null,"code":"import { extent } from \"d3\";\nimport { maybeInterval } from \"../options.js\";\nimport { parseTimeInterval } from \"../time.js\";\nimport { map } from \"../transforms/map.js\";\nexport function shiftX(interval, options) {\n  return shiftK(\"x\", interval, options);\n}\nexport function shiftY(interval, options) {\n  return shiftK(\"y\", interval, options);\n}\nfunction shiftK(x, interval, options = {}) {\n  let offset;\n  let k = 1;\n  if (typeof interval === \"number\") {\n    k = interval;\n    offset = (x, k) => +x + k;\n  } else {\n    if (typeof interval === \"string\") {\n      const sign = interval.startsWith(\"-\") ? -1 : 1;\n      [interval, k] = parseTimeInterval(interval.replace(/^[+-]/, \"\"));\n      k *= sign;\n    }\n    interval = maybeInterval(interval);\n    offset = (x, k) => interval.offset(x, k);\n  }\n  const x1 = `${x}1`;\n  const x2 = `${x}2`;\n  const mapped = map({\n    [x1]: D => D.map(d => offset(d, k)),\n    [x2]: D => D\n  }, options);\n  const t = mapped[x2].transform;\n  mapped[x2].transform = () => {\n    const V = t();\n    const [x0, x1] = extent(V);\n    V.domain = k < 0 ? [x0, offset(x1, k)] : [offset(x0, k), x1];\n    return V;\n  };\n  return mapped;\n}","map":{"version":3,"names":["extent","maybeInterval","parseTimeInterval","map","shiftX","interval","options","shiftK","shiftY","x","offset","k","sign","startsWith","replace","x1","x2","mapped","D","d","t","transform","V","x0","domain"],"sources":["D:/Notebooks/notebooks-web/vue/node_modules/@observablehq/plot/src/transforms/shift.js"],"sourcesContent":["import {extent} from \"d3\";\nimport {maybeInterval} from \"../options.js\";\nimport {parseTimeInterval} from \"../time.js\";\nimport {map} from \"../transforms/map.js\";\n\nexport function shiftX(interval, options) {\n  return shiftK(\"x\", interval, options);\n}\n\nexport function shiftY(interval, options) {\n  return shiftK(\"y\", interval, options);\n}\n\nfunction shiftK(x, interval, options = {}) {\n  let offset;\n  let k = 1;\n  if (typeof interval === \"number\") {\n    k = interval;\n    offset = (x, k) => +x + k;\n  } else {\n    if (typeof interval === \"string\") {\n      const sign = interval.startsWith(\"-\") ? -1 : 1;\n      [interval, k] = parseTimeInterval(interval.replace(/^[+-]/, \"\"));\n      k *= sign;\n    }\n    interval = maybeInterval(interval);\n    offset = (x, k) => interval.offset(x, k);\n  }\n  const x1 = `${x}1`;\n  const x2 = `${x}2`;\n  const mapped = map(\n    {\n      [x1]: (D) => D.map((d) => offset(d, k)),\n      [x2]: (D) => D\n    },\n    options\n  );\n  const t = mapped[x2].transform;\n  mapped[x2].transform = () => {\n    const V = t();\n    const [x0, x1] = extent(V);\n    V.domain = k < 0 ? [x0, offset(x1, k)] : [offset(x0, k), x1];\n    return V;\n  };\n  return mapped;\n}\n"],"mappings":"AAAA,SAAQA,MAAM,QAAO,IAAI;AACzB,SAAQC,aAAa,QAAO,eAAe;AAC3C,SAAQC,iBAAiB,QAAO,YAAY;AAC5C,SAAQC,GAAG,QAAO,sBAAsB;AAExC,OAAO,SAASC,MAAMA,CAACC,QAAQ,EAAEC,OAAO,EAAE;EACxC,OAAOC,MAAM,CAAC,GAAG,EAAEF,QAAQ,EAAEC,OAAO,CAAC;AACvC;AAEA,OAAO,SAASE,MAAMA,CAACH,QAAQ,EAAEC,OAAO,EAAE;EACxC,OAAOC,MAAM,CAAC,GAAG,EAAEF,QAAQ,EAAEC,OAAO,CAAC;AACvC;AAEA,SAASC,MAAMA,CAACE,CAAC,EAAEJ,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzC,IAAII,MAAM;EACV,IAAIC,CAAC,GAAG,CAAC;EACT,IAAI,OAAON,QAAQ,KAAK,QAAQ,EAAE;IAChCM,CAAC,GAAGN,QAAQ;IACZK,MAAM,GAAGA,CAACD,CAAC,EAAEE,CAAC,KAAK,CAACF,CAAC,GAAGE,CAAC;EAC3B,CAAC,MAAM;IACL,IAAI,OAAON,QAAQ,KAAK,QAAQ,EAAE;MAChC,MAAMO,IAAI,GAAGP,QAAQ,CAACQ,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;MAC9C,CAACR,QAAQ,EAAEM,CAAC,CAAC,GAAGT,iBAAiB,CAACG,QAAQ,CAACS,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;MAChEH,CAAC,IAAIC,IAAI;IACX;IACAP,QAAQ,GAAGJ,aAAa,CAACI,QAAQ,CAAC;IAClCK,MAAM,GAAGA,CAACD,CAAC,EAAEE,CAAC,KAAKN,QAAQ,CAACK,MAAM,CAACD,CAAC,EAAEE,CAAC,CAAC;EAC1C;EACA,MAAMI,EAAE,GAAI,GAAEN,CAAE,GAAE;EAClB,MAAMO,EAAE,GAAI,GAAEP,CAAE,GAAE;EAClB,MAAMQ,MAAM,GAAGd,GAAG,CAChB;IACE,CAACY,EAAE,GAAIG,CAAC,IAAKA,CAAC,CAACf,GAAG,CAAEgB,CAAC,IAAKT,MAAM,CAACS,CAAC,EAAER,CAAC,CAAC,CAAC;IACvC,CAACK,EAAE,GAAIE,CAAC,IAAKA;EACf,CAAC,EACDZ,OACF,CAAC;EACD,MAAMc,CAAC,GAAGH,MAAM,CAACD,EAAE,CAAC,CAACK,SAAS;EAC9BJ,MAAM,CAACD,EAAE,CAAC,CAACK,SAAS,GAAG,MAAM;IAC3B,MAAMC,CAAC,GAAGF,CAAC,CAAC,CAAC;IACb,MAAM,CAACG,EAAE,EAAER,EAAE,CAAC,GAAGf,MAAM,CAACsB,CAAC,CAAC;IAC1BA,CAAC,CAACE,MAAM,GAAGb,CAAC,GAAG,CAAC,GAAG,CAACY,EAAE,EAAEb,MAAM,CAACK,EAAE,EAAEJ,CAAC,CAAC,CAAC,GAAG,CAACD,MAAM,CAACa,EAAE,EAAEZ,CAAC,CAAC,EAAEI,EAAE,CAAC;IAC5D,OAAOO,CAAC;EACV,CAAC;EACD,OAAOL,MAAM;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}